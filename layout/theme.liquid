<!doctype html>
<html lang="{{ request.locale.iso_code }}">
  <head>
    <meta http-equiv="Cache-Control" content="no-store">

    <!-- Enables smooth scrolling behavior for anchor links -->
    <style>
      html {
        scroll-behavior: smooth;
      }

      body,
      html {
        width: 100%;
        /* overflow-x: hidden; */
        max-width: 100%;
        box-sizing: border-box;
      }

      body > div:first-of-type {
        max-width: 100%;
        width: 100%;
        position: relative;
        box-sizing: border-box;
        overflow-x: clip;
      }

      /* Ensure all sections respect container width */
      section {
        max-width: 100%;
        width: 100%;
        box-sizing: border-box;
      }

      /* Sticky header can be full width but contained by parent */
      #shopify-section-header {
        max-width: 100%;
        width: 100%;
        box-sizing: border-box;
      }

      /* Ensure images don't cause overflow */
      img {
        max-width: 100%;
        height: auto;
      }
    </style>

    <!-- SEO ================================================== -->
    <link rel="canonical" href="{{ canonical_url }}">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"
    >
    <meta name="theme-color" content="{{ settings.color_primary }}">
    <link rel="shortcut icon" href="{{ 'New-fav.png'  | file_img_url: '180x180', crop: 'center' }}" type="image/png">
    <link rel="apple-touch-icon" sizes="180x180" href="{{ 'New-fav.png'  | file_img_url: '180x180', crop: 'center'  }}">
    <link
      rel="apple-touch-icon-precomposed"
      sizes="180x180"
      href="{{ 'New-fav.png'  | file_img_url: '180x180', crop: 'center'  }}"
    >
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="{{ 'New-fav.png'  | file_img_url: '32x32', crop: 'center'  }}"
    >
    <link
      rel="icon"
      type="image/png"
      sizes="194x194"
      href="{{ 'New-fav.png'  | file_img_url: '194x194', crop: 'center'  }}"
    >
    <link
      rel="icon"
      type="image/png"
      sizes="192x192"
      href="{{ 'New-fav.png'  | file_img_url: '192x192', crop: 'center'  }}"
    >
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="{{ 'New-fav.png'  | file_img_url: '16x16', crop: 'center'  }}"
    >
    {% render 'snippet-social-meta-tags' %}

    <title>
      {{ page_title }}
      {% if current_tags -%}
        {%- assign meta_tags = current_tags | join: ', ' %} &ndash; {{ 'general.meta.tags' | t: tags: meta_tags -}}
      {%- endif %}
      {% if current_page != 1 %} &ndash; {{ 'general.meta.page' | t: page: current_page }}{% endif %}
      {% unless page_title contains shop.name %} &ndash; {{ shop.name }}{% endunless %}
    </title>

    <!-- Helpers ================================================== -->

    <!-- Styles ================================================== -->
    <link
      rel="preload"
      as="style"
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;500;600;700&display=swap"
    >
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;500;600;700&display=swap" rel="stylesheet">
    <link
      rel="stylesheet"
      href="{{ 'tailwind.css' | asset_url }}"
    >
    <noscript><link rel="stylesheet" href="{{ 'tailwind.css' | asset_url }}"></noscript>
    <link
      rel="preload"
      as="image"
      href="{{ 'Vector_48_18f479c9-3e28-464c-812d-a6ef7c229e79.png' | file_img_url: 'master' }}"
      imagesrcset="{{ 'Vector_48_18f479c9-3e28-464c-812d-a6ef7c229e79.png' | file_img_url: '300x' }} 300w, {{ 'Vector_48_18f479c9-3e28-464c-812d-a6ef7c229e79.png' | file_img_url: '600x' }} 600w, {{ 'Vector_48_18f479c9-3e28-464c-812d-a6ef7c229e79.png' | file_img_url: '900x' }} 900w, {{ 'Vector_48_18f479c9-3e28-464c-812d-a6ef7c229e79.png' | file_img_url: '1200x' }} 1200w, {{ 'Vector_48_18f479c9-3e28-464c-812d-a6ef7c229e79.png' | file_img_url: '1500x' }} 1500w, {{ 'Vector_48_18f479c9-3e28-464c-812d-a6ef7c229e79.png' | file_img_url: '1800x' }} 1800w, {{ 'Vector_48_18f479c9-3e28-464c-812d-a6ef7c229e79.png' | file_img_url: '2100x' }} 2100w, {{ 'Vector_48_18f479c9-3e28-464c-812d-a6ef7c229e79.png' | file_img_url: '2400x' }} 2400w"
      imagesizes="100vw"
    >
    <!-- SwiperJS -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/swiper@12/swiper-bundle.min.css"
    >
    <script src="https://cdn.jsdelivr.net/npm/swiper@12/swiper-bundle.min.js"></script>

    <!-- Shopify Common and Optimize Scripts ================================================== -->
    <script src="{{ 'shopify_common.js' | shopify_asset_url }}" defer></script>
    <!-- Trackers ================================================== -->

    <!-- Facebook Pixel Code - Deferred Loading -->
    <script>
      // Defer Facebook Pixel loading
      window.addEventListener('load', function () {
        setTimeout(function () {
          !(function (f, b, e, v, n, t, s) {
            if (f.fbq) return;
            n = f.fbq = function () {
              n.callMethod ? n.callMethod.apply(n, arguments) : n.queue.push(arguments);
            };
            if (!f._fbq) f._fbq = n;
            n.push = n;
            n.loaded = !0;
            n.version = '2.0';
            n.queue = [];
            t = b.createElement(e);
            t.async = !0;
            t.src = v;
            s = b.getElementsByTagName(e)[0];
            s.parentNode.insertBefore(t, s);
          })(window, document, 'script', 'https://connect.facebook.net/en_US/fbevents.js');
          fbq('init', '575307124070704');
        }, 2000);
      });
    </script>
    <noscript
      ><img
        height="1"
        width="1"
        style="display:none"
        src="https://www.facebook.com/tr?id=575307124070704&ev=PageView&noscript=1"
    ></noscript>
    <!-- End Facebook Pixel Code -->

    <script type="text/javascript">
      // Defer Clarity loading
      window.addEventListener('load', function () {
        setTimeout(function () {
          (function (c, l, a, r, i, t, y) {
            c[a] =
              c[a] ||
              function () {
                (c[a].q = c[a].q || []).push(arguments);
              };
            t = l.createElement(r);
            t.async = 1;
            t.src = 'https://www.clarity.ms/tag/' + i;
            y = l.getElementsByTagName(r)[0];
            y.parentNode.insertBefore(t, y);
          })(window, document, 'clarity', 'script', 'gqrjuikpo2');
        }, 3000);
      });
    </script>

    <!-- Google Tag Manager -->
    <script>
      (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' });
        var f = d.getElementsByTagName(s)[0],
          j = d.createElement(s),
          dl = l != 'dataLayer' ? '&l=' + l : '';
        j.async = true;
        j.dataset.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
      })(window, document, 'script', 'dataLayer', 'GTM-NC6F7P2');
    </script>
    <!-- End Google Tag Manager -->

    <!-- Preload ================================================== -->
    <link
      rel="preload"
      as="image"
      href="{{ 'Vector_48_18f479c9-3e28-464c-812d-a6ef7c229e79.png' | file_img_url: 'master' }}"
      media="(min-width: 1024px)"
    >
    <link
      rel="preload"
      as="image"
      href="{{ 'Vector_49_36a11d0f-9c19-47a1-acfe-c7b210710cd8.png' | file_img_url: 'master' }}"
      media="(max-width: 1023px)"
    >

    <!-- Font Preloads ================================================== -->
    <link
      rel="preload"
      href="{{ 'hey_charlie-webfont.woff2' | asset_url }}"
      as="font"
      type="font/woff2"
      crossorigin
      async
    >
    <link
      rel="preload"
      href="{{ 'museosans_700-webfont.woff2' | asset_url }}"
      as="font"
      type="font/woff2"
      crossorigin
      async
    >

    {% render 'performance-optimization' %}
    {{ content_for_header }}
  </head>

  <body class="min-h-full">
    <!-- Google Tag Manager (noscript) -->
    <noscript
      ><iframe
        data-src="https://www.googletagmanager.com/ns.html?id=GTM-NC6F7P2"
        height="0"
        width="0"
        style="display:none;visibility:hidden"
      ></iframe
    ></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <div>
      {% section 'header' %}
      <main>{{ content_for_layout }}</main>
      {% render 'footer' %}
    </div>
    <div id="CartContainer"></div>
    <script>
      document.addEventListener('DOMContentLoaded', function () {
        if (window.upcartSubscribeCheckoutClicked) {
          window.upcartSubscribeCheckoutClicked(({ event }) => {
            const cart = window.upcartGetCart();
            const PRODUCT_ID = 10146222506299;
            const MAX_QUANTITY = 1;

            const limitedItem = cart.items.find(function (item) {
              return item.productId === PRODUCT_ID;
            });

            if (limitedItem && limitedItem.quantity > MAX_QUANTITY) {
              event.preventDefault();
              alert(`{{ 'products.product.one_sampler_limit' | t }}`);

              //update cart to only allow 1 item
              const variantId = limitedItem.variantId;
              const updates = {
                [variantId]: 1,
              };
              fetch(window.Shopify.routes.root + 'cart/update.js', {
                method: 'POST',
                headers: {
                  'Content-Type': 'application/json',
                },
                body: JSON.stringify({ updates }),
              })
                .then((response) => {
                  return response.json();
                })
                .catch((error) => {
                  console.error('Error: ', error);
                });
            }
          });
        } else {
          console.warn('Upcart Subscribe Checkout Clicked not available yet');
        }
      });
    </script>
    <style>
      #shopify-section-header {
        position: sticky;
        top: 0;
        z-index: 100;
      }
      #klaviyo-product-reviews-wrapper {
        max-width: 1000px;
        margin: 0 auto;
      }
      body,
      html {
        width: 100vw;
      }

      /* Prevent horizontal overflow without breaking sticky positioning */
      /* Constrain the main content container - use clip instead of hidden */
      body > div:first-of-type {
        max-width: 100%;
        width: 100%;
        position: relative;
        box-sizing: border-box;
        overflow-x: clip;
      }

      /* Ensure all sections respect container width */
      section {
        max-width: 100%;
        width: 100%;
        box-sizing: border-box;
      }

      /* Sticky header can be full width but contained by parent */
      #shopify-section-header {
        max-width: 100%;
        width: 100%;
        box-sizing: border-box;
      }

      /* Ensure images don't cause overflow */
      img {
        max-width: 100%;
        height: auto;
      }
    </style>
    <script>
      // Upcart script for preventing users from adding more than 1 sample to the cart
      document.addEventListener('DOMContentLoaded', function () {
        if (window.upcartSubscribeCartUpdated) {
          window.upcartSubscribeCartUpdated(async function ({ cart }) {
            const PRODUCT_IDs = [
              10146222506299, 10157743702331, 8988037349691, 8988019032379, 8988008677691, 8987025113403, 8987006402875,
              9055585927384, 9055585108184, 9055584878808, 9055584092376, 9055583437016, 8120078401752, 8120024367320,
              8120047272152, 8120082071768, 8119984521432,
            ];
            const MAX_QUANTITY = 1;

            const limitedItems = cart.items.filter((item) => PRODUCT_IDs.includes(item.productId));

            let updates = {};
            limitedItems.forEach((item) => {
              if (item.quantity > MAX_QUANTITY) {
                updates = { ...updates, [item.variantId]: 1 };
              }
            });
            if (Object.keys(updates).length > 0) {
              alert(`{{ 'products.product.one_sampler_limit' | t }}`);

              // Update cart to only allow 1 item
              await fetch(window.Shopify.routes.root + 'cart/update.js', {
                method: 'POST',
                headers: {
                  'Content-Type': 'application/json',
                },
                body: JSON.stringify({ updates }),
              });
              window.upcartRefreshCart();
            }
          });
        }
      });
    </script>
    <script>
      // Upcart Cart script for Skio
      window.addEventListener('aftersell-upcart:public-events:cart-opened', () => {
        console.log('upcartOnCartOpened');
        const cartPopup = document.querySelector('#CartPopup');
        console.log('cartPopup', cartPopup);
        if (!cartPopup) return;
        console.log('cartPopup found');

        const rechargeOptionsToRemove = [
          '3100672216',
          '3100770520',
          '3102081240',
          '3100737752',
          '3100475608',
          '3104112856',
          '3101786328',
          '3100639448',
          '3103752408',
          '3101130968',
          '3100934360',
          '3101753560',
          '3101982936',
          '3100704984',
          '3102867672',
          '3101098200',
          '3101032664',
          '3100573912',
          '3100508376',
          '3100868824',
          '3101819096',
          '3100836056',
          '3103064280',
          '3101950168',
          '3100803288',
          '3100967128',
          '3102769368',
          '3103391960',
          '3101163736',
          '3101196504',
          '3100541144',
          '3100606680',
          '3101262040',
          '3103490264',
          '3101327576',
          '3100999896',
          '3103097048',
          '3100901592',
          '3101294808',
          '3101425880',
          '3101524184',
          '3101229272',
          '3101065432',
          '3101360344',
          '3102507224',
          '3102474456',
          '3103162584',
          '3103031512',
          '3102834904',
          '3103686872',
          '3102933208',
          '3101655256',
          '3101589720',
          '3101917400',
          '3101720792',
          '3101556952',
          '3102048472',
          '3103195352',
          '3104243928',
          '3102146776',
          '3102671064',
          '3103621336',
          '3101393112',
          '3101884632',
          '3103916248',
          '3101458648',
          '3103129816',
          '3102638296',
          '3101688024',
          '3101491416',
          '3102343384',
          '3102605528',
          '3104309464',
          '3102703832',
          '3103260888',
          '3102441688',
          '3101622488',
          '3103228120',
          '3103424728',
          '3102998744',
          '3102900440',
          '3103326424',
          '3102736600',
          '3103883480',
          '3104211160',
          '3103817944',
          '3102572760',
          '3103293656',
          '3104014552',
          '3104080088',
          '3104047320',
          '3103359192',
          '3104178392',
          '3104145624',
          '3103981784',
          '3103457496',
          '3103719640',
        ];
        function cleanDropdowns() {
          const dropdowns = cartPopup.querySelectorAll('.upcart-subscription-upgrade-dropdown');
          const removed = [];

          dropdowns.forEach((dropdown) => {
            dropdown.querySelectorAll('option').forEach((option) => {
              if (rechargeOptionsToRemove.includes(option.value)) {
                removed.push({ text: option.textContent.trim(), value: option.value });
                option.remove();
              }
            });
          });

          if (removed.length) {
            console.log(`Removed ${removed.length} option(s):`, removed);
          } else {
            console.log('No matching options found to remove.');
          }
        }

        cleanDropdowns();

        const observer = new MutationObserver(() => {
          cleanDropdowns();
        });

        observer.observe(cartPopup, {
          childList: true,
          subtree: true,
        });
      });
    </script>
  </body>
</html>
